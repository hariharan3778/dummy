<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Favorite Luna ‚ù§Ô∏è</title>
    <style>
        :root {
            --coral: #ff6b6b;
            --spotify-green: #1db954;
            --soft-pink: #fff0f3;
            --glass: rgba(255, 255, 255, 0.8);
            --player-gradient: linear-gradient(180deg, #5c0a0a 0%, #121212 100%);
        }

        body {
            margin: 0; background: var(--soft-pink);
            display: flex; justify-content: center; align-items: center;
            height: 100vh; overflow: hidden; font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            transition: background 1s ease;
        }

        /* --- BACKGROUND ANIMATION --- */
        #bg-container { position: absolute; width: 100%; height: 100%; z-index: 1; pointer-events: none; }
        .bg-emoji { 
            position: absolute; bottom: -50px; 
            animation: moveUp 6s linear infinite; 
            opacity: 0.6; 
            filter: drop-shadow(0 0 5px rgba(255, 107, 107, 0.3));
        }
        @keyframes moveUp { 
            0% { transform: translateY(0) rotate(0deg); opacity: 0; } 
            20% { opacity: 0.7; }
            100% { transform: translateY(-110vh) rotate(360deg); opacity: 0; } 
        }

        /* --- APPEARANCE ANIMATION --- */
        .fade-in { animation: fadeIn 0.8s ease forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- CARDS & PANELS --- */
        .card { 
            text-align: center; background: var(--glass); 
            backdrop-filter: blur(10px);
            padding: 40px; border-radius: 30px; 
            box-shadow: 0 20px 60px rgba(255, 77, 109, 0.15); 
            z-index: 10; width: 320px; 
            border: 1px solid rgba(255,255,255,0.4);
        }

        .btn-wrapper { display: flex; justify-content: center; gap: 20px; margin-top: 25px; }
        .btn { 
            padding: 14px 28px; border-radius: 15px; border: none; 
            color: white; font-weight: bold; cursor: pointer; 
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .btn:hover { transform: scale(1.05); }
        #yesBtn { background: #4cd137; }
        #noBtn { background: #ff4d4d; position: relative; }

        /* --- VIDEO PHASE --- */
        #video-phase { 
            display: none; width: 320px; height: 568px; 
            background: #000; border-radius: 25px; overflow: hidden; 
            z-index: 100; border: 6px solid white; 
            box-shadow: 0 25px 50px rgba(0,0,0,0.4); 
        }
        video { width: 100%; height: 100%; object-fit: cover; }

        /* --- DASHBOARD --- */
        #gift-interface { 
            display: none; grid-template-columns: repeat(2, 1fr); 
            gap: 20px; width: 95vw; max-width: 420px; z-index: 20; 
        }
        .panel { 
            background: var(--glass); backdrop-filter: blur(10px);
            border-radius: 25px; padding: 20px; text-align: center; 
            cursor: pointer; transition: all 0.4s ease; 
            border: 1px solid rgba(255,255,255,0.4);
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
        }
        .panel:hover { 
            transform: translateY(-8px); 
            background: white;
            box-shadow: 0 15px 35px rgba(255, 107, 107, 0.2);
        }
        .panel img { width: 90px; height: 90px; object-fit: cover; border-radius: 18px; margin-bottom: 12px; }
        .panel-label { font-weight: 800; color: var(--coral); font-size: 0.9rem; letter-spacing: 1px; }

        /* --- MODAL SYSTEM --- */
        .overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.85); z-index: 200; 
            display: none; justify-content: center; align-items: center; 
            backdrop-filter: blur(8px);
        }
        .modal-container { 
            width: 350px; height: 650px; background: var(--player-gradient); 
            border-radius: 45px; display: flex; flex-direction: column; 
            align-items: center; padding: 25px; position: relative; 
            border: 1px solid rgba(255,255,255,0.1); color: white; 
            box-shadow: 0 30px 60px rgba(0,0,0,0.5);
        }
        .close-x { position: absolute; top: 35px; left: 30px; cursor: pointer; font-size: 28px; z-index: 10; opacity: 0.7; transition: 0.3s; }
        .close-x:hover { opacity: 1; transform: scale(1.2); }

        /* --- PLAYER --- */
        .album-art-main { 
            width: 270px; height: 270px; border-radius: 25px; 
            margin-top: 60px; object-fit: cover; 
            box-shadow: 0 25px 50px rgba(0,0,0,0.6); 
            transition: transform 0.5s ease;
        }
        .controls { display: flex; align-items: center; justify-content: center; gap: 30px; margin-top: 40px; width: 100%; }
        .play-pause-btn { 
            width: 70px; height: 70px; background: var(--spotify-green); 
            border-radius: 50%; border: none; font-size: 30px; 
            cursor: pointer; color: black; display: flex; 
            justify-content: center; align-items: center; 
            transition: transform 0.2s ease;
        }
        .play-pause-btn:active { transform: scale(0.9); }
        .skip-btn { background: none; border: none; color: white; font-size: 35px; cursor: pointer; opacity: 0.8; transition: 0.3s; }
        .skip-btn:hover { opacity: 1; }
        
        .playlist-scroll { width: 100%; margin-top: 60px; overflow-y: auto; height: 450px; scrollbar-width: none; }
        .song-row { 
            display: flex; align-items: center; padding: 14px; margin-bottom: 12px; 
            background: rgba(255,255,255,0.06); border-radius: 18px; 
            cursor: pointer; transition: 0.3s;
        }
        .song-row:hover { background: rgba(255,255,255,0.12); transform: translateX(5px); }

        /* --- LETTER TEXT --- */
        .letter-content {
            padding: 10px 30px; font-size: 1.05rem; line-height: 1.6;
            color: #333; text-align: left; overflow-y: auto;
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="bg-container"></div>

    <div class="card fade-in" id="card-ask">
        <img src="gif/front.gif" style="width:160px; margin-bottom: 10px;">
        <h1 style="color: var(--coral); margin-bottom: 5px;">Will you be my Valentine?</h1>
        <p style="color: #666; margin-bottom: 20px;">I have a surprise waiting for you...</p>
        <div class="btn-wrapper">
            <button class="btn" id="yesBtn" onclick="startVideo()">Yes!</button>
            <button class="btn" id="noBtn" onmouseover="dodge()">No</button>
        </div>
    </div>

    <div id="video-phase">
        <video id="vPlayer" playsinline>
            <source src="video/valentine_video.mp4" type="video/mp4">
        </video>
    </div>

    <div id="gift-interface" class="fade-in">
        <div class="panel" onclick="openModal('music-modal')">
            <img src="gif/musicpanel.webp">
            <div class="panel-label">OUR PLAYLIST</div>
        </div>
        <div class="panel" onclick="openModal('letter-modal')">
            <img src="gif/letter.gif">
            <div class="panel-label">A NOTE FOR YOU</div>
        </div>
        <div class="panel" style="grid-column: span 2;" onclick="openModal('gift-modal')">
            <img src="gif/mainchopanel.webp">
            <div class="panel-label">MY SPECIAL GIFT</div>
        </div>
    </div>

    <div id="music-modal" class="overlay">
        <div class="modal-container">
            <span class="close-x" onclick="closePlayer()">‚úï</span>
            
            <div id="playlist-view" class="playlist-scroll">
                <h2 style="text-align:center; margin-bottom: 30px; letter-spacing: 1px;">Our Top Tracks</h2>
                <div class="song-row" onclick="loadSong(0)">
                    <img src="song images/art1.jpg" style="width:50px; height:50px; border-radius:10px; object-fit: cover;">
                    <div style="margin-left:15px;"><b>Arumbay Karumbay</b><br><small style="opacity:0.6;">Nivas, Janaki Iyer</small></div>
                </div>
                <div class="song-row" onclick="loadSong(1)">
                    <img src="song images/art2.jpg" style="width:50px; height:50px; border-radius:10px; object-fit: cover;">
                    <div style="margin-left:15px;"><b>Endha Pakkam</b><br><small style="opacity:0.6;">Radhul Nambiar</small></div>
                </div>
                <div class="song-row" onclick="loadSong(2)">
                    <img src="song images/art3.jpg" style="width:50px; height:50px; border-radius:10px; object-fit: cover;">
                    <div style="margin-left:15px;"><b>Karuvakaatu Karuvaaya</b><br><small style="opacity:0.6;">D. Imman, Vandana</small></div>
                </div>
                <div class="song-row" onclick="loadSong(3)">
                    <img src="song images/art4.jpg" style="width:50px; height:50px; border-radius:10px; object-fit: cover;">
                    <div style="margin-left:15px;"><b>Konji Pesida Venaam</b><br><small style="opacity:0.6;">Nivas K Prasanna</small></div>
                </div>
                <div class="song-row" onclick="loadSong(4)">
                    <img src="song images/art5.jpg" style="width:50px; height:50px; border-radius:10px; object-fit: cover;">
                    <div style="margin-left:15px;"><b>Yaanji</b><br><small style="opacity:0.6;">Anirudh Ravichander</small></div>
                </div>
            </div>

            <div id="player-view" class="hidden" style="width:100%; text-align:center;">
                <img id="p-art" class="album-art-main">
                <div style="margin-top:35px;">
                    <h2 id="p-title" style="margin:0; font-size: 1.5rem;">Title</h2>
                    <p id="p-artist" style="opacity:0.6; font-size: 1.1rem;">Artist</p>
                </div>
                <div class="controls">
                    <button class="skip-btn" onclick="prevSong()">‚èÆ</button>
                    <button class="play-pause-btn" onclick="toggleAudio()" id="p-btn">‚è∏</button>
                    <button class="skip-btn" onclick="nextSong()">‚è≠</button>
                </div>
                <p onclick="backToList()" style="margin-top:40px; cursor:pointer; opacity:0.6; font-weight: bold; font-size: 0.9rem;">VIEW PLAYLIST</p>
            </div>
        </div>
    </div>

    <div id="letter-modal" class="overlay">
        <div class="modal-container" style="background: white; color: black; padding: 0; overflow: hidden; border-radius: 35px;">
            <span class="close-x" onclick="closeModal('letter-modal')" style="color:var(--coral); top: 25px; left: 25px;">‚úï</span>
            <img src="gif/insideletter.webp" style="width:100%; height: 220px; object-fit: cover;">
            <div class="letter-content">
                <h2 style="color: var(--coral); margin-top: 15px;">Hey Sweet Angel,</h2>
                <p>From the moment we met, you've added so much color to my life. You're the person I want to share my laughs, my dreams, and my weirdest thoughts with.</p>
                <p>Thank you for being exactly who you are. I made this little site just to see you smile. You're my favorite person, and I'm so lucky you said yes.</p>
                <p style="text-align: right; font-weight: bold; color: var(--coral);">Forever Yours ‚ù§Ô∏è</p>
            </div>
        </div>
    </div>

    <div id="gift-modal" class="overlay">
        <div class="modal-container" style="background: white; color: black; text-align: center; justify-content: center; border-radius: 35px;">
            <span class="close-x" onclick="closeModal('gift-modal')" style="color:var(--coral)">‚úï</span>
            <img src="gif/rose.webp" style="width:200px; filter: drop-shadow(0 10px 20px rgba(0,0,0,0.1));">
            <h2 style="color:var(--coral); font-size: 1.8rem; margin-top: 20px;">A Rose for You</h2>
            <p style="color: #666; padding: 0 30px;">Because you make my world bloom every single day. Happy Valentine's Day!</p>
        </div>
    </div>

    <audio id="bgMusic" loop src="music/music.mp3"></audio>
    <audio id="sPlayer"></audio>

    <script>
        function dodge() {
            const b = document.getElementById('noBtn');
            b.style.position = 'fixed';
            b.style.left = Math.random() * 80 + 'vw';
            b.style.top = Math.random() * 80 + 'vh';
        }

        function startVideo() {
            document.getElementById('card-ask').classList.add('hidden');
            const box = document.getElementById('video-phase');
            box.style.display = 'block';
            const v = document.getElementById('vPlayer');
            v.play();
            v.onended = () => {
                box.classList.add('fade-in');
                box.style.display = 'none';
                showDashboard();
            };
        }

        function showDashboard() {
            document.getElementById('gift-interface').style.display='grid';
            document.getElementById('bgMusic').play();
            document.body.style.background = "#0f0f0f";
        }

        let currentSongIndex = 0;
        const songs = [
            { t: 'Arumbay Karumbay', a: 'Nivas, Janaki Iyer', i: 'song images/art1.jpg', s: 'music/song1.mp3' },
            { t: 'Endha Pakkam', a: 'Radhul Nambiar', i: 'song images/art2.jpg', s: 'music/song2.mp3' },
            { t: 'Karuvakaatu Karuvaaya', a: 'D. Imman, Vandana', i: 'song images/art3.jpg', s: 'music/song3.mp3' },
            { t: 'Konji Pesida Venaam', a: 'Nivas K Prasanna', i: 'song images/art4.jpg', s: 'music/song4.mp3' },
            { t: 'Yaanji', a: 'Anirudh Ravichander', i: 'song images/art5.jpg', s: 'music/song5.mp3' }
        ];

        function openModal(id) { document.getElementById(id).style.display='flex'; }
        function closeModal(id) { document.getElementById(id).style.display='none'; }

        function loadSong(index) {
            currentSongIndex = index;
            const song = songs[index];
            document.getElementById('bgMusic').pause();
            document.getElementById('p-title').innerText = song.t;
            document.getElementById('p-artist').innerText = song.a;
            document.getElementById('p-art').src = song.i;
            const s = document.getElementById('sPlayer');
            s.src = song.s;
            s.play();
            document.getElementById('playlist-view').classList.add('hidden');
            document.getElementById('player-view').classList.remove('hidden');
            document.getElementById('p-btn').innerText = '‚è∏';
        }

        function nextSong() { currentSongIndex = (currentSongIndex + 1) % songs.length; loadSong(currentSongIndex); }
        function prevSong() { currentSongIndex = (currentSongIndex - 1 + songs.length) % songs.length; loadSong(currentSongIndex); }
        
        function toggleAudio() {
            const s = document.getElementById('sPlayer');
            if(s.paused) { s.play(); document.getElementById('p-btn').innerText='‚è∏'; }
            else { s.pause(); document.getElementById('p-btn').innerText='‚ñ∂'; }
        }
        function backToList() { 
            document.getElementById('player-view').classList.add('hidden'); 
            document.getElementById('playlist-view').classList.remove('hidden'); 
        }
        function closePlayer() { 
            closeModal('music-modal'); 
            document.getElementById('sPlayer').pause(); 
            document.getElementById('bgMusic').play(); 
            backToList(); 
        }

        // Beautiful floating animation
        setInterval(() => {
            const p = document.createElement('div'); 
            p.className = 'bg-emoji'; 
            p.innerHTML = ['‚ù§Ô∏è','üíñ','üå∏','‚ú®'][Math.floor(Math.random()*4)];
            p.style.left = Math.random() * 100 + 'vw';
            p.style.fontSize = (Math.random() * 20 + 15) + 'px';
            p.style.animationDuration = (Math.random() * 3 + 4) + 's';
            document.getElementById('bg-container').appendChild(p);
            setTimeout(() => p.remove(), 7000);
        }, 400);
    </script>
</body>
</html>